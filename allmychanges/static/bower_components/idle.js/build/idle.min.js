/*! Idle.Js, copyright 2014-04-06, Shawn Mclean*/
(function(){var e;if(!document.addEventListener){if(document.attachEvent){document.addEventListener=function(e,t,n){return document.attachEvent("on"+e,t,n)}}else{document.addEventListener=function(){return{}}}}if(!document.removeEventListener){if(document.detachEvent){document.removeEventListener=function(e,t){return document.detachEvent("on"+e,t)}}else{document.removeEventListener=function(){return{}}}}"use strict";e={};e=function(){function e(e){var t,n;if(e){this.awayTimeout=parseInt(e.awayTimeout,10);this.onAway=e.onAway;this.onAwayBack=e.onAwayBack;this.onVisible=e.onVisible;this.onHidden=e.onHidden}n=this;t=function(){return n.onActive()};window.onclick=t;window.onmousemove=t;window.onmouseenter=t;window.onkeydown=t;window.onscroll=t;window.onmousewheel=t}e.isAway=false;e.awayTimeout=3e3;e.awayTimestamp=0;e.awayTimer=null;e.onAway=null;e.onAwayBack=null;e.onVisible=null;e.onHidden=null;e.prototype.onActive=function(){this.awayTimestamp=(new Date).getTime()+this.awayTimeout;if(this.isAway){if(this.onAwayBack){this.onAwayBack()}this.start()}this.isAway=false;return true};e.prototype.start=function(){var e;if(!this.listener){this.listener=function(){return e.handleVisibilityChange()};document.addEventListener("visibilitychange",this.listener,false);document.addEventListener("webkitvisibilitychange",this.listener,false);document.addEventListener("msvisibilitychange",this.listener,false)}this.awayTimestamp=(new Date).getTime()+this.awayTimeout;if(this.awayTimer!==null){clearTimeout(this.awayTimer)}e=this;this.awayTimer=setTimeout(function(){return e.checkAway()},this.awayTimeout+100);return this};e.prototype.stop=function(){if(this.awayTimer!==null){clearTimeout(this.awayTimer)}if(this.listener!==null){document.removeEventListener("visibilitychange",this.listener);document.removeEventListener("webkitvisibilitychange",this.listener);document.removeEventListener("msvisibilitychange",this.listener);this.listener=null}return this};e.prototype.setAwayTimeout=function(e){this.awayTimeout=parseInt(e,10);return this};e.prototype.checkAway=function(){var e,t;t=(new Date).getTime();if(t<this.awayTimestamp){this.isAway=false;e=this;this.awayTimer=setTimeout(function(){return e.checkAway()},this.awayTimestamp-t+100);return}if(this.awayTimer!==null){clearTimeout(this.awayTimer)}this.isAway=true;if(this.onAway){return this.onAway()}};e.prototype.handleVisibilityChange=function(){if(document.hidden||document.msHidden||document.webkitHidden){if(this.onHidden){return this.onHidden()}}else{if(this.onVisible){return this.onVisible()}}};return e}();window.Idle=e}).call(this)
