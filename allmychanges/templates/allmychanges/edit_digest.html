{% extends "allmychanges/new-base.html" %}


{% block content %}

<h1 class="page-header">Edit digest</h1>
<h2 class="page-subheader"><a href="{% url "digest" %}">View digest</a></h2>

{% verbatim %}
<div ng-controller="DigestBuilderCtrl">
  <angucomplete-alt placeholder="Namespace" pause="100" selected-object="selected_namespace" remote-url="/v1/autocomplete-namespaces/?q=" remote-url-data-field="results" title-field="name" minlength="1" input-class="form-control form-control-small" override-suggestions="true"/></angucomplete-alt>

  <ul class="digest-source">
    <li ng-repeat="item in items" class="digest-source__item">
      <p>
        <input type="text" ng-model="item.namespace"/>
        <input type="text" ng-model="item.name"/>
        <input type="text" ng-model="item.source"/>
        <button ng-click="remove(item.resource_uri)">x</button> 
        <span class="digest-source__problem" ng-if="item.problem">{{item.problem}}</span>
      </p>
    </li>
  </ul>

  <p>
    <form ng-submit="add_item()">
      <input ng-model="new_item.namespace" type="text" placeholder="Namespace (python, node, etc.)"/>
      <input ng-model="new_item.name" type="text" placeholder="Package name"/>
      <input ng-model="new_item.source" type="text" placeholder="Source repository"/>
      <input type="submit" ng-disabled="!(new_item.namespace && new_item.name && new_item.source)" value="Add"/>
    </form>
  </p>
</div>
{% endverbatim %}

{% endblock content %}
